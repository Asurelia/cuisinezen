<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎯 DoD Quality Dashboard - CuisineZen</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            color: #2d3748;
            font-size: 2.5rem;
            font-weight: 700;
        }

        .status-badge {
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.2rem;
            color: white;
        }

        .status-excellent { background: linear-gradient(45deg, #48bb78, #38a169); }
        .status-good { background: linear-gradient(45deg, #4299e1, #3182ce); }
        .status-warning { background: linear-gradient(45deg, #ed8936, #dd6b20); }
        .status-critical { background: linear-gradient(45deg, #f56565, #e53e3e); }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 16px 48px rgba(0, 0, 0, 0.15);
        }

        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .metric-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #4a5568;
        }

        .metric-trend {
            font-size: 0.9rem;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .trend-up { background: #c6f6d5; color: #2f855a; }
        .trend-down { background: #fed7d7; color: #c53030; }
        .trend-stable { background: #bee3f8; color: #2b6cb0; }

        .metric-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .metric-threshold {
            font-size: 0.9rem;
            color: #718096;
        }

        .metric-progress {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-bar {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .charts-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .chart-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
        }

        .chart-placeholder {
            height: 300px;
            background: linear-gradient(45deg, #f7fafc, #edf2f7);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #718096;
            font-weight: 500;
        }

        .issues-section {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .issues-list {
            list-style: none;
        }

        .issue-item {
            padding: 15px;
            border-left: 4px solid;
            margin-bottom: 10px;
            border-radius: 0 8px 8px 0;
            background: #f7fafc;
        }

        .issue-critical { border-color: #f56565; background: #fed7d7; }
        .issue-warning { border-color: #ed8936; background: #feebc8; }
        .issue-info { border-color: #4299e1; background: #bee3f8; }

        .actions-section {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .action-button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #4299e1, #3182ce);
            color: white;
        }

        .btn-secondary {
            background: white;
            color: #4a5568;
            border: 2px solid #e2e8f0;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }

        .live-indicator {
            position: relative;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #48bb78;
            font-weight: 500;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: #48bb78;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .timestamp {
            color: #718096;
            font-size: 0.9rem;
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .charts-section {
                grid-template-columns: 1fr;
            }

            .actions-section {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <!-- Header -->
        <header class="header">
            <div>
                <h1>🎯 DoD Quality Dashboard</h1>
                <div class="live-indicator">
                    <div class="live-dot"></div>
                    Live Monitoring
                </div>
            </div>
            <div class="status-badge status-good" id="globalStatus">
                ✅ GOOD 87/100
            </div>
        </header>

        <!-- Metrics Grid -->
        <div class="metrics-grid">
            <!-- Test Coverage -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">🧪 Test Coverage</span>
                    <span class="metric-trend trend-up">↗ +3%</span>
                </div>
                <div class="metric-value" style="color: #48bb78;">92%</div>
                <div class="metric-threshold">Objectif: 85%</div>
                <div class="metric-progress">
                    <div class="progress-bar" style="width: 92%; background: linear-gradient(45deg, #48bb78, #38a169);"></div>
                </div>
            </div>

            <!-- Performance Score -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">⚡ Performance</span>
                    <span class="metric-trend trend-down">↘ -2</span>
                </div>
                <div class="metric-value" style="color: #ed8936;">83</div>
                <div class="metric-threshold">Objectif: 90</div>
                <div class="metric-progress">
                    <div class="progress-bar" style="width: 83%; background: linear-gradient(45deg, #ed8936, #dd6b20);"></div>
                </div>
            </div>

            <!-- Security Score -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">🔒 Security</span>
                    <span class="metric-trend trend-stable">→ 0</span>
                </div>
                <div class="metric-value" style="color: #48bb78;">100</div>
                <div class="metric-threshold">0 vulnerabilities</div>
                <div class="metric-progress">
                    <div class="progress-bar" style="width: 100%; background: linear-gradient(45deg, #48bb78, #38a169);"></div>
                </div>
            </div>

            <!-- Code Quality -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-title">📊 Code Quality</span>
                    <span class="metric-trend trend-up">↗ +1</span>
                </div>
                <div class="metric-value" style="color: #4299e1;">85</div>
                <div class="metric-threshold">Maintainability Index</div>
                <div class="metric-progress">
                    <div class="progress-bar" style="width: 85%; background: linear-gradient(45deg, #4299e1, #3182ce);"></div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-section">
            <div class="chart-card">
                <h3 class="chart-title">📈 Tendance de Qualité (30 jours)</h3>
                <div class="chart-placeholder">
                    Graphique de tendance - Intégration Chart.js à venir
                </div>
            </div>

            <div class="chart-card">
                <h3 class="chart-title">🎯 Répartition des Tests</h3>
                <div class="chart-placeholder">
                    Graphique en secteurs - Couverture par module
                </div>
            </div>
        </div>

        <!-- Issues Section -->
        <div class="issues-section">
            <h3 class="chart-title">🚨 Problèmes à Résoudre</h3>
            <ul class="issues-list">
                <li class="issue-item issue-warning">
                    <strong>Performance:</strong> Bundle size 1.2MB (objectif: <1MB)
                    <div class="timestamp">Détecté il y a 2 heures</div>
                </li>
                <li class="issue-item issue-info">
                    <strong>Tests:</strong> Module analytics manque de tests E2E
                    <div class="timestamp">Détecté il y a 1 jour</div>
                </li>
                <li class="issue-item issue-info">
                    <strong>Documentation:</strong> API docs incomplètes pour 3 endpoints
                    <div class="timestamp">Détecté il y a 3 jours</div>
                </li>
            </ul>
        </div>

        <!-- Actions Section -->
        <div class="actions-section">
            <button class="action-button btn-primary" onclick="runDoDGates()">
                🔄 Run DoD Gates
            </button>
            <button class="action-button btn-secondary" onclick="generateReport()">
                📊 Generate Report
            </button>
            <button class="action-button btn-secondary" onclick="viewTests()">
                🧪 View Tests
            </button>
            <button class="action-button btn-secondary" onclick="analyzePerformance()">
                ⚡ Analyze Performance
            </button>
            <button class="action-button btn-secondary" onclick="exportData()">
                💾 Export Data
            </button>
        </div>
    </div>

    <script>
        // Simulation de données en temps réel
        let currentScore = 87;
        let metrics = {
            coverage: 92,
            performance: 83,
            security: 100,
            quality: 85
        };

        function updateMetrics() {
            // Simulation de fluctuations réalistes
            metrics.coverage = Math.max(80, Math.min(100, metrics.coverage + (Math.random() - 0.5) * 2));
            metrics.performance = Math.max(70, Math.min(100, metrics.performance + (Math.random() - 0.5) * 3));
            metrics.quality = Math.max(70, Math.min(100, metrics.quality + (Math.random() - 0.5) * 1));
            
            currentScore = Math.round((metrics.coverage + metrics.performance + metrics.security + metrics.quality) / 4);
            
            updateUI();
        }

        function updateUI() {
            const statusBadge = document.getElementById('globalStatus');
            
            if (currentScore >= 90) {
                statusBadge.className = 'status-badge status-excellent';
                statusBadge.textContent = `✅ EXCELLENT ${currentScore}/100`;
            } else if (currentScore >= 80) {
                statusBadge.className = 'status-badge status-good';
                statusBadge.textContent = `✅ GOOD ${currentScore}/100`;
            } else if (currentScore >= 70) {
                statusBadge.className = 'status-badge status-warning';
                statusBadge.textContent = `⚠️ WARNING ${currentScore}/100`;
            } else {
                statusBadge.className = 'status-badge status-critical';
                statusBadge.textContent = `❌ CRITICAL ${currentScore}/100`;
            }

            // Mise à jour des métriques individuelles
            const metricValues = document.querySelectorAll('.metric-value');
            const progressBars = document.querySelectorAll('.progress-bar');
            
            if (metricValues.length >= 4) {
                metricValues[0].textContent = Math.round(metrics.coverage) + '%';
                metricValues[1].textContent = Math.round(metrics.performance);
                metricValues[2].textContent = Math.round(metrics.security);
                metricValues[3].textContent = Math.round(metrics.quality);
                
                progressBars[0].style.width = metrics.coverage + '%';
                progressBars[1].style.width = metrics.performance + '%';
                progressBars[2].style.width = metrics.security + '%';
                progressBars[3].style.width = metrics.quality + '%';
            }
        }

        // Actions des boutons
        function runDoDGates() {
            showNotification('🔄 Exécution des gates DoD...', 'info');
            
            // Simulation d'exécution
            setTimeout(() => {
                showNotification('✅ Gates DoD exécutés avec succès!', 'success');
                updateMetrics();
            }, 3000);
        }

        function generateReport() {
            showNotification('📊 Génération du rapport...', 'info');
            
            setTimeout(() => {
                showNotification('✅ Rapport généré: dod-report.pdf', 'success');
                // Simulation de téléchargement
                const link = document.createElement('a');
                link.href = '#';
                link.download = 'dod-report.pdf';
                link.click();
            }, 2000);
        }

        function viewTests() {
            showNotification('🧪 Ouverture de la vue des tests...', 'info');
            window.open('/tests', '_blank');
        }

        function analyzePerformance() {
            showNotification('⚡ Lancement de l\'analyse de performance...', 'info');
            window.open('/performance', '_blank');
        }

        function exportData() {
            showNotification('💾 Export des données...', 'info');
            
            const data = {
                timestamp: new Date().toISOString(),
                score: currentScore,
                metrics: metrics
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `dod-metrics-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            
            showNotification('✅ Données exportées!', 'success');
        }

        function showNotification(message, type) {
            // Création d'une notification simple
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 600;
                z-index: 1000;
                animation: slideIn 0.3s ease;
                background: ${type === 'success' ? '#48bb78' : type === 'error' ? '#f56565' : '#4299e1'};
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Mise à jour automatique toutes les 30 secondes
        setInterval(updateMetrics, 30000);

        // Initialisation
        updateUI();

        // Animation CSS pour les notifications
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Gestion du mode sombre
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        }

        // Restaurer le mode sombre si activé
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
        }
    </script>
</body>
</html>